(this.webpackJsonpmaxwell=this.webpackJsonpmaxwell||[]).push([[0],{183:function(t,e,i){"use strict";i.r(e);var a=i(10),n=i.n(a),r=i(72),c=i.n(r),s=(i(80),i(34)),l=i.n(s),u=i(73),o=i(19),d=i(74);function h(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],a=0;a<t[0]*t[1]*t[2];a++)i.push(e);return{values:i,shape:t}}function g(t,e,i,a,n){t.values[e+i*t.shape[0]+a*t.shape[0]*t.shape[1]]+=n}function p(t,e,i,a,n){t.values[e+i*t.shape[0]+a*t.shape[0]*t.shape[1]]=n(t.values[e+i*t.shape[0]+a*t.shape[0]*t.shape[1]])}var v=[window.innerWidth,window.innerHeight],f=[1e3,Math.ceil(1e3/v[0]*v[1]),1],m=new function t(e,i){var a=this;Object(d.a)(this,t),this.data=void 0,this.gpu=void 0,this.updateMagneticX=void 0,this.updateMagneticY=void 0,this.updateMagneticZ=void 0,this.updateElectricX=void 0,this.updateElectricY=void 0,this.updateElectricZ=void 0,this.stepElectric=function(t){var e=a.data.electricFieldX.values,i=a.data.electricFieldY.values,n=a.data.electricFieldZ.values,r=a.data.magneticFieldX.values,c=a.data.magneticFieldY.values,s=a.data.magneticFieldZ.values,l=a.data.permittivity.values;a.data.electricFieldX.values=a.updateElectricX(c,s,l,e,t),a.data.electricFieldY.values=a.updateElectricY(r,s,l,i,t),a.data.electricFieldZ.values=a.updateElectricZ(r,c,l,n,t),a.data.time+=t/2},this.stepMagnetic=function(t){var e=a.data.electricFieldX.values,i=a.data.electricFieldY.values,n=a.data.electricFieldZ.values,r=a.data.magneticFieldX.values,c=a.data.magneticFieldY.values,s=a.data.magneticFieldZ.values,l=a.data.permeability.values;a.data.magneticFieldX.values=a.updateMagneticX(i,n,l,r,t),a.data.magneticFieldY.values=a.updateMagneticY(e,n,l,c,t),a.data.magneticFieldZ.values=a.updateMagneticZ(e,i,l,s,t),a.data.time+=t/2},this.getData=function(){return a.data},this.data={time:0,electricFieldX:h(e),electricFieldY:h(e),electricFieldZ:h(e),magneticFieldX:h(e),magneticFieldY:h(e),magneticFieldZ:h(e),permittivity:h(e,1),permeability:h(e,1)};var n=e[0]*e[1]*e[2];function r(t,e,i,a,n,r,c){return n<0||n>=e||r<0||r>=i||c<0||c>=a?0:t[n+r*e+c*e*a]}function c(t,e){return t%e}function s(t,e,i){return Math.floor(t/e)%i}function l(t,e,i,a){return Math.floor(t/(e*i))%a}this.gpu=new o.GPU,this.updateMagneticX=this.gpu.createKernel((function(t,e,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,d=this.constants.gridSizeY,h=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,d),f=l(u,o,d,h);return r(a,o,d,h,p,v,f)-n/(r(i,o,d,h,p,v,f)*g)*(r(e,o,d,h,p,v+1,f)-r(e,o,d,h,p,v,f))}),{output:[n],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateMagneticY=this.gpu.createKernel((function(t,e,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,d=this.constants.gridSizeY,h=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,d),f=l(u,o,d,h);return r(a,o,d,h,p,v,f)-n/(r(i,o,d,h,p,v,f)*g)*-(r(e,o,d,h,p+1,v,f)-r(e,o,d,h,p,v,f))}),{output:[n],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateMagneticZ=this.gpu.createKernel((function(t,e,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,d=this.constants.gridSizeY,h=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,d),f=l(u,o,d,h);return r(a,o,d,h,p,v,f)-n/(r(i,o,d,h,p,v,f)*g)*(r(e,o,d,h,p+1,v,f)-r(e,o,d,h,p,v,f)-(r(t,o,d,h,p,v+1,f)-r(t,o,d,h,p,v,f)))}),{output:[n],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateElectricX=this.gpu.createKernel((function(t,e,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,d=this.constants.gridSizeY,h=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,d),f=l(u,o,d,h);return r(a,o,d,h,p,v,f)+n/(r(i,o,d,h,p,v,f)*g)*(r(e,o,d,h,p,v,f)-r(e,o,d,h,p,v-1,f))}),{output:[n],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateElectricY=this.gpu.createKernel((function(t,e,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,d=this.constants.gridSizeY,h=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,d),f=l(u,o,d,h);return r(a,o,d,h,p,v,f)+n/(r(i,o,d,h,p,v,f)*g)*-(r(e,o,d,h,p,v,f)-r(e,o,d,h,p-1,v,f))}),{output:[n],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateElectricZ=this.gpu.createKernel((function(t,e,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,d=this.constants.gridSizeY,h=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,d),f=l(u,o,d,h);return r(a,o,d,h,p,v,f)+n/(r(i,o,d,h,p,v,f)*g)*(r(e,o,d,h,p,v,f)-r(e,o,d,h,p-1,v,f)-(r(t,o,d,h,p,v,f)-r(t,o,d,h,p,v-1,f)))}),{output:[n],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r])}(f,.04),z=function(t){function e(t,e,i,a,n,r,c){return n<0||n>=e||r<0||r>=i||c<0||c>=a?0:t[n+r*e+c*e*a]}return t.createKernel((function(t,i,a,n,r,c,s,l){var u=this.constants.gridSizeX,o=this.constants.gridSizeY,d=this.constants.gridSizeZ,h=u*this.thread.x/this.output.x,g=o*(1-this.thread.y/this.output.y),p=Math.floor(h),v=Math.floor(g),f=Math.floor(d/2),m=e(t,u,o,d,p,v,f)*e(t,u,o,d,p,v,f)+e(i,u,o,d,p,v,f)*e(i,u,o,d,p,v,f)+e(a,u,o,d,p,v,f)*e(a,u,o,d,p,v,f),z=(e(n,u,o,d,p,v,f)+e(n,u,o,d,p-1,v-1,f))/2,S=(e(r,u,o,d,p,v,f)+e(r,u,o,d,p-1,v-1,f))/2,M=(e(c,u,o,d,p,v,f)+e(c,u,o,d,p-1,v-1,f))/2,F=z*z+S*S+M*M,X=Math.max(0,Math.min(1,(1+.4342944819*Math.log(e(s,u,o,d,p,v,f)))/4)),Y=Math.max(0,Math.min(1,(1+.4342944819*Math.log(e(l,u,o,d,p,v,f)))/4)),b=(Math.abs(h%1-.5)<.25?1:0)*(Math.abs(g%1-.5)<.25?1:0),Z=1-b;this.color(m/15+.5*b*X,m/15+F/15,F/15+.5*Z*Y)}),{output:[v[0],v[1]],constants:{gridSizeX:f[0],gridSizeY:f[1],gridSizeZ:f[2]},graphical:!0}).setFunctions([e])};function S(t,e,i){return Math.max(t,Math.min(e,i))}var M=null,F=0,X=[0,0],Y=null,b=!1,Z=!1;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement((function(){var t=Object(a.useRef)(null),e=Object(a.useCallback)((function(){var e=!1;return function(){var i=Object(u.a)(l.a.mark((function i(){var a,n,r,c,s,u,d,h,p;return l.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=!1,n=function(t){return setTimeout((function(){a=!0,t()}),20)},r=function(t){return requestAnimationFrame(t)},c=new Promise(n),s=new Promise(r);case 5:if(e){i.next=15;break}return i.next=8,Promise.race([c,s]);case 8:if(u=m.getData(),a||m.getData().time<=0){if(null!==Y&&(X=Y,F=Math.min(1e4,F+200)),(F*=Math.pow(.1,.02))>1&&t.current)for(d=S(0,u.electricFieldX.shape[0]-1,Math.floor(u.electricFieldX.shape[0]*X[0]/t.current.width)),h=S(0,u.electricFieldX.shape[1]-1,Math.floor(u.electricFieldX.shape[1]*X[1]/t.current.height)),p=0;p<u.electricFieldX.shape[2];p++)g(u.electricFieldZ,d,h,p,Math.sin(4*Math.PI*u.time)*F*.02);m.stepMagnetic(.02),m.stepElectric(.02),c=new Promise(n)}else null===M&&null!==t.current&&(M=z(new o.GPU({mode:"webgl2",canvas:t.current}))),null!==M&&M(u.electricFieldX.values,u.electricFieldY.values,u.electricFieldZ.values,u.magneticFieldX.values,u.magneticFieldY.values,u.magneticFieldZ.values,u.permittivity.values,u.permeability.values),s=new Promise(r);return a=!1,i.next=13,Promise.race([c,s]);case 13:i.next=5;break;case 15:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}()(),function(){e=!0}}),[]);Object(a.useEffect)(e,[e]);var i=Object(a.useCallback)((function(t,e,i){for(var a=Math.round(f[0]*(e[0]/v[0])),n=Math.round(f[1]*(e[1]/v[1])),r=Math.max(0,a-2);r<=Math.min(f[0]-1,a+2);r++)for(var c=Math.max(0,n-2);c<=Math.min(f[1]-1,n+2);c++)p(t,r,c,0,(function(t){return Math.min(1e3,Math.max(1,i*t))}))}),[]),r=Object(a.useCallback)((function(t){0===t.button?(Y=[t.clientX,t.clientY],t.preventDefault()):2===t.button?(i(m.getData().permittivity,[t.clientX,t.clientY],t.ctrlKey?.1:10),b=!0,t.preventDefault()):1===t.button&&(i(m.getData().permeability,[t.clientX,t.clientY],t.ctrlKey?.1:10),Z=!0,t.preventDefault())}),[i]),c=Object(a.useCallback)((function(t){0===t.button&&null!==Y&&(Y=[t.clientX,t.clientY],t.preventDefault()),b&&(i(m.getData().permittivity,[t.clientX,t.clientY],t.ctrlKey?.1:10),t.preventDefault()),Z&&(i(m.getData().permeability,[t.clientX,t.clientY],t.ctrlKey?.1:10),t.preventDefault())}),[i]),s=Object(a.useCallback)((function(t){0===t.button?(Y=null,t.preventDefault()):1===t.button?(Z=!1,t.preventDefault()):2===t.button&&(b=!1,t.preventDefault())}),[]);return n.a.createElement("canvas",{width:v[0],height:v[1],ref:t,onMouseDown:r,onMouseMove:c,onMouseUp:s,onContextMenu:function(t){return t.preventDefault()}})}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},75:function(t,e,i){t.exports=i(183)},80:function(t,e,i){}},[[75,1,2]]]);
//# sourceMappingURL=main.cd43f0de.chunk.js.map