(this.webpackJsonpmaxwell=this.webpackJsonpmaxwell||[]).push([[0],{184:function(e,t,i){"use strict";i.r(t);var a=i(6),n=i.n(a),r=i(73),c=i.n(r),s=(i(81),i(35)),l=i.n(s),u=i(74),o=i(12),h=i(20),d=i(75);function g(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],a=0;a<e[0]*e[1]*e[2];a++)i.push(t);return{values:i,shape:e}}function p(e,t,i,a,n){e.values[t+i*e.shape[0]+a*e.shape[0]*e.shape[1]]=n}function v(e,t,i,a,n){e.values[t+i*e.shape[0]+a*e.shape[0]*e.shape[1]]+=n}var m=[window.innerWidth,window.innerHeight],f=m[0]/m[1],S=m[0]>=m[1]?[800,Math.ceil(800/f),1]:[Math.ceil(800*f),800,1],b=new function e(t,i){var a=this;Object(d.a)(this,e),this.data=void 0,this.gpu=void 0,this.updateMagneticX=void 0,this.updateMagneticY=void 0,this.updateMagneticZ=void 0,this.updateElectricX=void 0,this.updateElectricY=void 0,this.updateElectricZ=void 0,this.stepElectric=function(e){var t=a.data.electricFieldX.values,i=a.data.electricFieldY.values,n=a.data.electricFieldZ.values,r=a.data.magneticFieldX.values,c=a.data.magneticFieldY.values,s=a.data.magneticFieldZ.values,l=a.data.permittivity.values;a.data.electricFieldX.values=a.updateElectricX(c,s,l,t,e),a.data.electricFieldY.values=a.updateElectricY(r,s,l,i,e),a.data.electricFieldZ.values=a.updateElectricZ(r,c,l,n,e),a.data.time+=e/2},this.stepMagnetic=function(e){var t=a.data.electricFieldX.values,i=a.data.electricFieldY.values,n=a.data.electricFieldZ.values,r=a.data.magneticFieldX.values,c=a.data.magneticFieldY.values,s=a.data.magneticFieldZ.values,l=a.data.permeability.values;a.data.magneticFieldX.values=a.updateMagneticX(i,n,l,r,e),a.data.magneticFieldY.values=a.updateMagneticY(t,n,l,c,e),a.data.magneticFieldZ.values=a.updateMagneticZ(t,i,l,s,e),a.data.time+=e/2},this.getData=function(){return a.data},this.data={time:0,electricFieldX:g(t),electricFieldY:g(t),electricFieldZ:g(t),magneticFieldX:g(t),magneticFieldY:g(t),magneticFieldZ:g(t),permittivity:g(t,1),permeability:g(t,1)};var n=t[0]*t[1]*t[2];function r(e,t,i,a,n,r,c){return n<0||n>=t||r<0||r>=i||c<0||c>=a?0:e[n+r*t+c*t*a]}function c(e,t){return e%t}function s(e,t,i){return Math.floor(e/t)%i}function l(e,t,i,a){return Math.floor(e/(t*i))%a}this.gpu=new h.GPU,this.updateMagneticX=this.gpu.createKernel((function(e,t,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,h=this.constants.gridSizeY,d=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,h),m=l(u,o,h,d);return r(a,o,h,d,p,v,m)-n/(r(i,o,h,d,p,v,m)*g)*(r(t,o,h,d,p,v+1,m)-r(t,o,h,d,p,v,m))}),{output:[n],constants:{cellSize:i,gridSizeX:t[0],gridSizeY:t[1],gridSizeZ:t[2]}}).setFunctions([c,s,l,r]).setWarnVarUsage(!1),this.updateMagneticY=this.gpu.createKernel((function(e,t,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,h=this.constants.gridSizeY,d=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,h),m=l(u,o,h,d);return r(a,o,h,d,p,v,m)-n/(r(i,o,h,d,p,v,m)*g)*-(r(t,o,h,d,p+1,v,m)-r(t,o,h,d,p,v,m))}),{output:[n],constants:{cellSize:i,gridSizeX:t[0],gridSizeY:t[1],gridSizeZ:t[2]}}).setFunctions([c,s,l,r]).setWarnVarUsage(!1),this.updateMagneticZ=this.gpu.createKernel((function(e,t,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,h=this.constants.gridSizeY,d=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,h),m=l(u,o,h,d);return r(a,o,h,d,p,v,m)-n/(r(i,o,h,d,p,v,m)*g)*(r(t,o,h,d,p+1,v,m)-r(t,o,h,d,p,v,m)-(r(e,o,h,d,p,v+1,m)-r(e,o,h,d,p,v,m)))}),{output:[n],constants:{cellSize:i,gridSizeX:t[0],gridSizeY:t[1],gridSizeZ:t[2]}}).setFunctions([c,s,l,r]).setWarnVarUsage(!1),this.updateElectricX=this.gpu.createKernel((function(e,t,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,h=this.constants.gridSizeY,d=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,h),m=l(u,o,h,d);return r(a,o,h,d,p,v,m)+n/(r(i,o,h,d,p,v,m)*g)*(r(t,o,h,d,p,v,m)-r(t,o,h,d,p,v-1,m))}),{output:[n],constants:{cellSize:i,gridSizeX:t[0],gridSizeY:t[1],gridSizeZ:t[2]}}).setFunctions([c,s,l,r]).setWarnVarUsage(!1),this.updateElectricY=this.gpu.createKernel((function(e,t,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,h=this.constants.gridSizeY,d=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,h),m=l(u,o,h,d);return r(a,o,h,d,p,v,m)+n/(r(i,o,h,d,p,v,m)*g)*-(r(t,o,h,d,p,v,m)-r(t,o,h,d,p-1,v,m))}),{output:[n],constants:{cellSize:i,gridSizeX:t[0],gridSizeY:t[1],gridSizeZ:t[2]}}).setFunctions([c,s,l,r]).setWarnVarUsage(!1),this.updateElectricZ=this.gpu.createKernel((function(e,t,i,a,n){var u=Math.floor(this.thread.x),o=this.constants.gridSizeX,h=this.constants.gridSizeY,d=this.constants.gridSizeZ,g=this.constants.cellSize,p=c(u,o),v=s(u,o,h),m=l(u,o,h,d);return r(a,o,h,d,p,v,m)+n/(r(i,o,h,d,p,v,m)*g)*(r(t,o,h,d,p,v,m)-r(t,o,h,d,p-1,v,m)-(r(e,o,h,d,p,v,m)-r(e,o,h,d,p,v-1,m)))}),{output:[n],constants:{cellSize:i,gridSizeX:t[0],gridSizeY:t[1],gridSizeZ:t[2]}}).setFunctions([c,s,l,r]).setWarnVarUsage(!1)}(S,.04),z=function(e){function t(e,t,i,a,n,r,c){return n<0||n>=t||r<0||r>=i||c<0||c>=a?0:e[n+r*t+c*t*a]}return e.createKernel((function(e,i,a,n,r,c,s,l){var u=this.constants.gridSizeX,o=this.constants.gridSizeY,h=this.constants.gridSizeZ,d=u*this.thread.x/this.output.x,g=o*(1-this.thread.y/this.output.y),p=Math.floor(d),v=Math.floor(g),m=Math.floor(h/2),f=t(e,u,o,h,p,v,m)*t(e,u,o,h,p,v,m)+t(i,u,o,h,p,v,m)*t(i,u,o,h,p,v,m)+t(a,u,o,h,p,v,m)*t(a,u,o,h,p,v,m),S=(t(n,u,o,h,p,v,m)+t(n,u,o,h,p-1,v-1,m))/2,b=(t(r,u,o,h,p,v,m)+t(r,u,o,h,p-1,v-1,m))/2,z=(t(c,u,o,h,p,v,m)+t(c,u,o,h,p-1,v-1,m))/2,M=S*S+b*b+z*z,F=Math.max(0,Math.min(1,(1+.4342944819*Math.log(t(s,u,o,h,p,v,m)))/4)),X=Math.max(0,Math.min(1,(1+.4342944819*Math.log(t(l,u,o,h,p,v,m)))/4)),x=(Math.abs(d%1-.5)<.25?1:0)*(Math.abs(g%1-.5)<.25?1:0),Y=1-x;this.color(f/15+.5*x*F,f/15+M/15,M/15+.5*Y*X)}),{output:[m[0],m[1]],constants:{gridSizeX:S[0],gridSizeY:S[1],gridSizeZ:S[2]},graphical:!0}).setFunctions([t]).setWarnVarUsage(!1)};function M(e,t,i){return Math.max(e,Math.min(t,i))}var F=null,X=0,x=[0,0],Y=null,w=!1,Z=!1;function E(e){return n.a.createElement("div",null,n.a.createElement("label",null,e.label),n.a.createElement("div",null,n.a.createElement("input",{type:"range",min:e.min,max:e.max,value:e.value,step:e.step,onChange:function(t){return e.setValue(parseFloat(t.target.value))},style:{height:10,width:"100%"}}),n.a.createElement("div",{style:{textAlign:"center",lineHeight:.1,marginBottom:"7px"}},e.value)))}function y(e){return n.a.createElement("div",null,e.options.map((function(t,i){return n.a.createElement("button",{key:t,style:{boxSizing:"border-box",border:i===e.selectedOption?"4px solid rgb(0, 150, 255)":"0",height:"50px",margin:"5px",width:"".concat(100/e.options.length,"%"),background:"rgb(100, 100, 100)",color:"white"},onClick:function(t){return e.setSelectedOption(i)}},t)})))}function O(e){return n.a.createElement("div",{style:{textAlign:"center",position:"absolute",opacity:.8,background:"rgba(33, 33, 33, 100)",padding:"10px",fontWeight:"lighter",color:"white"}},n.a.createElement(E,{label:"Brush size",value:e.brushSize,setValue:e.setBrushSize,min:0,max:100,step:1}),n.a.createElement(E,{label:"Brush value",value:e.brushValue,setValue:e.setBrushValue,min:1,max:100,step:1}),n.a.createElement(E,{label:"Signal frequency",value:e.signalFrequency,setValue:e.setSignalFrequency,min:.5,max:5,step:.5}),n.a.createElement(y,{options:["\u03b5 brush","\xb5 brush","Signal"],selectedOption:e.clickOption,setSelectedOption:e.setClickOption}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement((function(){var e=Object(a.useState)(5),t=Object(o.a)(e,2),i=t[0],r=t[1],c=Object(a.useState)(1),s=Object(o.a)(c,2),d=s[0],g=s[1],f=Object(a.useState)(1),E=Object(o.a)(f,2),y=E[0],j=E[1],k=Object(a.useState)(2),V=Object(o.a)(k,2),W=V[0],C=V[1],U=Object(a.useRef)(null),B=Object(a.useCallback)((function(){var e=!1;return function(){var t=Object(u.a)(l.a.mark((function t(){var i,a,n,r,c,s,u,o,d,g;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=!1,a=!1,n=function(e){return setTimeout((function(){i=!0,e()}),20)},r=function(e){return requestAnimationFrame((function(){a=!0,e()}))},c=new Promise(n),s=new Promise(r);case 6:if(e){t.next=16;break}return t.next=9,Promise.race([c,s]);case 9:if(u=b.getData(),i||b.getData().time<=0){if(null!==Y&&(x=Y,X=Math.min(1e4,X+200)),(X*=Math.pow(.1,.02))>1&&U.current)for(o=M(0,u.electricFieldX.shape[0]-1,Math.floor(u.electricFieldX.shape[0]*x[0]/U.current.width)),d=M(0,u.electricFieldX.shape[1]-1,Math.floor(u.electricFieldX.shape[1]*x[1]/U.current.height)),g=0;g<u.electricFieldX.shape[2];g++)v(u.electricFieldZ,o,d,g,Math.sin(2*y*Math.PI*u.time)*X*.02);b.stepMagnetic(.02),b.stepElectric(.02),i=!1,c=new Promise(n)}return a&&(null===F&&null!==U.current&&(F=z(new h.GPU({mode:"webgl2",canvas:U.current}))),null!==F&&F(u.electricFieldX.values,u.electricFieldY.values,u.electricFieldZ.values,u.magneticFieldX.values,u.magneticFieldY.values,u.magneticFieldZ.values,u.permittivity.values,u.permeability.values),a=!1,s=new Promise(r)),t.next=14,Promise.race([c,s]);case 14:t.next=6;break;case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[y]);Object(a.useEffect)(B,[B]);var D=Object(a.useCallback)((function(e,t){var a=Math.round(S[0]*(t[0]/m[0])),n=Math.round(S[1]*(t[1]/m[1])),r=Math.round(i/2);console.log(r);for(var c=Math.max(0,a-r);c<=Math.min(S[0]-1,a+r);c++)for(var s=Math.max(0,n-r);s<=Math.min(S[1]-1,n+r);s++)p(e,c,s,0,d)}),[i,d]),P=Object(a.useCallback)((function(e){var t=Object(o.a)(e,2),i=t[0],a=t[1];2===W?Y=[i,a]:0===W?(D(b.getData().permittivity,[i,a]),w=!0):1===W&&(D(b.getData().permeability,[i,a]),Z=!0)}),[D,W]),K=Object(a.useCallback)((function(e){var t=Object(o.a)(e,2),i=t[0],a=t[1];2===W&&null!==Y&&(Y=[i,a]),w&&D(b.getData().permittivity,[i,a]),Z&&D(b.getData().permeability,[i,a])}),[D,W]),q=Object(a.useCallback)((function(e){var t=Object(o.a)(e,2);t[0],t[1];2===W?Y=null:1===W?Z=!1:0===W&&(w=!1)}),[W]);return n.a.createElement("div",null,n.a.createElement("canvas",{width:m[0],height:m[1],ref:U,style:{position:"absolute"},onMouseDown:function(e){return P([e.clientX,e.clientY])},onMouseMove:function(e){return K([e.clientX,e.clientY])},onMouseUp:function(e){return q([e.clientX,e.clientY])},onTouchStart:function(e){return P([e.touches[0].clientX,e.touches[0].clientY])},onTouchMove:function(e){return K([e.touches[0].clientX,e.touches[0].clientY])},onTouchEnd:function(e){return q([e.touches[0].clientX,e.touches[0].clientY])},onContextMenu:function(e){return e.preventDefault()}}),n.a.createElement(O,{brushSize:i,setBrushSize:r,brushValue:d,setBrushValue:g,signalFrequency:y,setSignalFrequency:j,clickOption:W,setClickOption:C}))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,i){e.exports=i(184)},81:function(e,t,i){}},[[76,1,2]]]);
//# sourceMappingURL=main.82a51adb.chunk.js.map