(this.webpackJsonpmaxwell=this.webpackJsonpmaxwell||[]).push([[0],{183:function(t,e,i){"use strict";i.r(e);var n=i(11),a=i.n(n),r=i(72),c=i.n(r),s=(i(80),i(34)),l=i.n(s),o=i(73),u=i(19),d=i(74);function h(t){for(var e=[],i=0;i<t[0]*t[1]*t[2];i++)e.push(0);return{values:e,shape:t}}function g(t,e,i,n,a){t.values[e+i*t.shape[0]+n*t.shape[0]*t.shape[1]]+=a}var p=[window.innerWidth,window.innerHeight],v=[400,Math.ceil(400/p[0]*p[1]),1],f=new function t(e,i){var n=this;Object(d.a)(this,t),this.data=void 0,this.gpu=void 0,this.updateMagneticX=void 0,this.updateMagneticY=void 0,this.updateMagneticZ=void 0,this.updateElectricX=void 0,this.updateElectricY=void 0,this.updateElectricZ=void 0,this.stepElectric=function(t){var e=n.data.electricFieldX.values,i=n.data.electricFieldY.values,a=n.data.electricFieldZ.values,r=n.data.magneticFieldX.values,c=n.data.magneticFieldY.values,s=n.data.magneticFieldZ.values;n.data.electricFieldX.values=n.updateElectricX(c,s,e,t),n.data.electricFieldY.values=n.updateElectricY(r,s,i,t),n.data.electricFieldZ.values=n.updateElectricZ(r,c,a,t),n.data.time+=t/2},this.stepMagnetic=function(t){var e=n.data.electricFieldX.values,i=n.data.electricFieldY.values,a=n.data.electricFieldZ.values,r=n.data.magneticFieldX.values,c=n.data.magneticFieldY.values,s=n.data.magneticFieldZ.values;n.data.magneticFieldX.values=n.updateMagneticX(i,a,r,t),n.data.magneticFieldY.values=n.updateMagneticY(e,a,c,t),n.data.magneticFieldZ.values=n.updateMagneticZ(e,i,s,t),n.data.time+=t/2},this.getData=function(){return n.data},this.data={time:0,electricFieldX:h(e),electricFieldY:h(e),electricFieldZ:h(e),magneticFieldX:h(e),magneticFieldY:h(e),magneticFieldZ:h(e),permittivity:h(e),permeability:h(e)};var a=e[0]*e[1]*e[2];function r(t,e,i,n,a,r,c){return a<0||a>=e||r<0||r>=i||c<0||c>=n?0:t[a+r*e+c*e*n]}function c(t,e){return t%e}function s(t,e,i){return Math.floor(t/e)%i}function l(t,e,i,n){return Math.floor(t/(e*i))%n}this.gpu=new u.GPU,this.updateMagneticX=this.gpu.createKernel((function(t,e,i,n){var a=Math.floor(this.thread.x),o=this.constants.gridSizeX,u=this.constants.gridSizeY,d=this.constants.gridSizeZ,h=this.constants.cellSize,g=c(a,o),p=s(a,o,u),v=l(a,o,u,d);return r(i,o,u,d,g,p,v)-n/h*(r(e,o,u,d,g,p+1,v)-r(e,o,u,d,g,p,v))}),{output:[a],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateMagneticY=this.gpu.createKernel((function(t,e,i,n){var a=Math.floor(this.thread.x),o=this.constants.gridSizeX,u=this.constants.gridSizeY,d=this.constants.gridSizeZ,h=this.constants.cellSize,g=c(a,o),p=s(a,o,u),v=l(a,o,u,d);return r(i,o,u,d,g,p,v)-n/h*-(r(e,o,u,d,g+1,p,v)-r(e,o,u,d,g,p,v))}),{output:[a],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateMagneticZ=this.gpu.createKernel((function(t,e,i,n){var a=Math.floor(this.thread.x),o=this.constants.gridSizeX,u=this.constants.gridSizeY,d=this.constants.gridSizeZ,h=this.constants.cellSize,g=c(a,o),p=s(a,o,u),v=l(a,o,u,d);return r(i,o,u,d,g,p,v)-n/h*(r(e,o,u,d,g+1,p,v)-r(e,o,u,d,g,p,v)-(r(t,o,u,d,g,p+1,v)-r(t,o,u,d,g,p,v)))}),{output:[a],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateElectricX=this.gpu.createKernel((function(t,e,i,n){var a=Math.floor(this.thread.x),o=this.constants.gridSizeX,u=this.constants.gridSizeY,d=this.constants.gridSizeZ,h=this.constants.cellSize,g=c(a,o),p=s(a,o,u),v=l(a,o,u,d);return r(i,o,u,d,g,p,v)+n/h*(r(e,o,u,d,g,p,v)-r(e,o,u,d,g,p-1,v))}),{output:[a],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateElectricY=this.gpu.createKernel((function(t,e,i,n){var a=Math.floor(this.thread.x),o=this.constants.gridSizeX,u=this.constants.gridSizeY,d=this.constants.gridSizeZ,h=this.constants.cellSize,g=c(a,o),p=s(a,o,u),v=l(a,o,u,d);return r(i,o,u,d,g,p,v)+n/h*-(r(e,o,u,d,g,p,v)-r(e,o,u,d,g-1,p,v))}),{output:[a],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r]),this.updateElectricZ=this.gpu.createKernel((function(t,e,i,n){var a=Math.floor(this.thread.x),o=this.constants.gridSizeX,u=this.constants.gridSizeY,d=this.constants.gridSizeZ,h=this.constants.cellSize,g=c(a,o),p=s(a,o,u),v=l(a,o,u,d);return r(i,o,u,d,g,p,v)+n/h*(r(e,o,u,d,g,p,v)-r(e,o,u,d,g-1,p,v)-(r(t,o,u,d,g,p,v)-r(t,o,u,d,g,p-1,v)))}),{output:[a],constants:{cellSize:i,gridSizeX:e[0],gridSizeY:e[1],gridSizeZ:e[2]}}).setFunctions([c,s,l,r])}(v,.03),z=function(t){function e(t,e,i,n,a,r,c){return a<0||a>=e||r<0||r>=i||c<0||c>=n?0:t[a+r*e+c*e*n]}return t.createKernel((function(t,i,n,a,r,c){var s=this.constants.gridSizeX,l=this.constants.gridSizeY,o=this.constants.gridSizeZ,u=this.output.x,d=this.output.y,h=s*this.thread.x/u,g=l*(1-this.thread.y/d),p=Math.floor(h),v=Math.floor(g),f=p+1,z=v+1,S=f===p?0:(h-p)/(f-p),m=z===v?0:(g-v)/(z-v),F=Math.floor(o/2),M=e(t,s,l,o,p,v,F)*e(t,s,l,o,p,v,F)+e(i,s,l,o,p,v,F)*e(i,s,l,o,p,v,F)+e(n,s,l,o,p,v,F)*e(n,s,l,o,p,v,F),X=e(t,s,l,o,p,z,F)*e(t,s,l,o,p,z,F)+e(i,s,l,o,p,z,F)*e(i,s,l,o,p,z,F)+e(n,s,l,o,p,z,F)*e(n,s,l,o,p,z,F),Y=e(t,s,l,o,f,v,F)*e(t,s,l,o,f,v,F)+e(i,s,l,o,f,v,F)*e(i,s,l,o,f,v,F)+e(n,s,l,o,f,v,F)*e(n,s,l,o,f,v,F),Z=e(t,s,l,o,f,z,F)*e(t,s,l,o,f,z,F)+e(i,s,l,o,f,z,F)*e(i,s,l,o,f,z,F)+e(n,s,l,o,f,z,F)*e(n,s,l,o,f,z,F),w=(e(a,s,l,o,p,v,F)+e(a,s,l,o,p+1,v+1,F))/2,x=(e(r,s,l,o,p,v,F)+e(r,s,l,o,p+1,v+1,F))/2,E=(e(c,s,l,o,p,v,F)+e(c,s,l,o,p+1,v+1,F))/2,b=(e(a,s,l,o,p,z,F)+e(a,s,l,o,p+1,z+1,F))/2,P=(e(r,s,l,o,p,z,F)+e(r,s,l,o,p+1,z+1,F))/2,k=(e(c,s,l,o,p,z,F)+e(c,s,l,o,p+1,z+1,F))/2,y=(e(a,s,l,o,f,v,F)+e(a,s,l,o,f+1,v+1,F))/2,K=(e(r,s,l,o,f,v,F)+e(r,s,l,o,f+1,v+1,F))/2,j=(e(c,s,l,o,f,v,F)+e(c,s,l,o,f+1,v+1,F))/2,O=(e(a,s,l,o,f,z,F)+e(a,s,l,o,f+1,z+1,F))/2,D=(e(r,s,l,o,f,z,F)+e(r,s,l,o,f+1,z+1,F))/2,U=(e(c,s,l,o,f,z,F)+e(c,s,l,o,f+1,z+1,F))/2,W=w*w+x*x+E*E,B=b*b+P*P+k*k,G=y*y+K*K+j*j,I=O*O+D*D+U*U,J=S*Y+(1-S)*M,q=S*Z+(1-S)*X,A=Math.max(0,Math.min(50,m*q+(1-m)*J)),C=S*G+(1-S)*W,H=S*I+(1-S)*B,R=Math.max(0,Math.min(50,m*H+(1-m)*C));this.color(A/50,0,R/50)}),{output:[p[0],p[1]],constants:{gridSizeX:v[0],gridSizeY:v[1],gridSizeZ:v[2]},graphical:!0}).setFunctions([e])};function S(t,e,i){return Math.max(t,Math.min(e,i))}var m=null,F=0,M=[0,0],X=null;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement((function(){var t=Object(n.useRef)(null),e=Object(n.useCallback)((function(){var e=!1;return function(){var i=Object(o.a)(l.a.mark((function i(){var n,a,r,c,s,o,d,h,p;return l.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=!1,a=function(t){return setTimeout((function(){n=!0,t()}),10)},r=function(t){return requestAnimationFrame(t)},c=new Promise(a),s=new Promise(r);case 5:if(e){i.next=15;break}return i.next=8,Promise.race([c,s]);case 8:if(o=f.getData(),n||f.getData().time<=0){if(null!==X&&(M=X,F=Math.min(1e4,F+100)),(F*=Math.pow(.1,.01))>1&&t.current)for(d=S(0,o.electricFieldX.shape[0]-1,Math.floor(o.electricFieldX.shape[0]*M[0]/t.current.width)),h=S(0,o.electricFieldX.shape[1]-1,Math.floor(o.electricFieldX.shape[1]*M[1]/t.current.height)),p=0;p<o.electricFieldX.shape[2];p++)g(o.electricFieldZ,d,h,p,Math.sin(4*Math.PI*o.time)*F*.01);f.stepMagnetic(.01),f.stepElectric(.01),c=new Promise(a)}else null===m&&null!==t.current&&(m=z(new u.GPU({mode:"webgl2",canvas:t.current}))),null!==m&&m(o.electricFieldX.values,o.electricFieldY.values,o.electricFieldZ.values,o.magneticFieldX.values,o.magneticFieldY.values,o.magneticFieldZ.values),s=new Promise(r);return n=!1,i.next=13,Promise.race([c,s]);case 13:i.next=5;break;case 15:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}()(),function(){e=!0}}),[]);return Object(n.useEffect)(e,[e]),a.a.createElement("canvas",{width:p[0],height:p[1],ref:t,onMouseDown:function(t){return X=[t.clientX,t.clientY]},onMouseMove:function(t){null!==X&&(X=[t.clientX,t.clientY])},onMouseUp:function(t){return X=null}})}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},75:function(t,e,i){t.exports=i(183)},80:function(t,e,i){}},[[75,1,2]]]);
//# sourceMappingURL=main.9e90388f.chunk.js.map