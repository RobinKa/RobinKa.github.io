(this.webpackJsonpmaxwell=this.webpackJsonpmaxwell||[]).push([[0],{184:function(t,e,i){"use strict";i.r(e);var n=i(11),c=i.n(n),a=i(72),r=i.n(a),l=(i(81),i(34)),u=i.n(l),d=i(73),o=i(75),s=i(19),h=i(74);function g(t,e){for(var i=[],n=0;n<t[0];n++){for(var c=[],a=0;a<t[1];a++){for(var r=[],l=0;l<t[2];l++)r.push(e([n,a,l]));c.push(r)}i.push(c)}return i}var p=[window.innerWidth,window.innerHeight],f=.005,F=[120,Math.ceil(120/p[0]*p[1]),1],m=new function t(e,i){var n=this;Object(h.a)(this,t),this.data=void 0,this.gpu=void 0,this.updateMagneticX=void 0,this.updateMagneticY=void 0,this.updateMagneticZ=void 0,this.updateElectricX=void 0,this.updateElectricY=void 0,this.updateElectricZ=void 0,this.stepElectric=function(t){n.data.electricFieldX=n.updateElectricX(n.data.magneticFieldY,n.data.magneticFieldZ,n.data.electricFieldX,t),n.data.electricFieldY=n.updateElectricY(n.data.magneticFieldX,n.data.magneticFieldZ,n.data.electricFieldY,t),n.data.electricFieldZ=n.updateElectricZ(n.data.magneticFieldX,n.data.magneticFieldY,n.data.electricFieldZ,t),n.data.time+=t/2},this.stepMagnetic=function(t){n.data.magneticFieldX=n.updateMagneticX(n.data.electricFieldY,n.data.electricFieldZ,n.data.magneticFieldX,t),n.data.magneticFieldY=n.updateMagneticY(n.data.electricFieldX,n.data.electricFieldZ,n.data.magneticFieldY,t),n.data.magneticFieldZ=n.updateMagneticZ(n.data.electricFieldX,n.data.electricFieldY,n.data.magneticFieldZ,t),n.data.time+=t/2},this.getData=function(){return n.data},this.data={time:0,electricFieldX:g(e,(function(t){return 0})),electricFieldY:g(e,(function(t){return 0})),electricFieldZ:g(e,(function(t){return 0})),magneticFieldX:g(e,(function(t){return 0})),magneticFieldY:g(e,(function(t){return 0})),magneticFieldZ:g(e,(function(t){return 0})),permittivity:g(e,(function(t){return 0})),permeability:g(e,(function(t){return 0}))};var c=function(t){for(var e=[],i=t.length-1;i>=0;i--)e.push(t[i]);return e}(e);this.gpu=new s.GPU,this.updateMagneticX=this.gpu.createKernel((function(t,e,i,n){var c=this.thread.z,a=this.thread.y,r=this.thread.x,l=a+1>=this.output.y?0:e[c][a+1][r];return i[c][a][r]-n*(l-e[c][a][r]-0)/this.constants.cellSize}),{output:c,constants:{cellSize:i}}),this.updateMagneticY=this.gpu.createKernel((function(t,e,i,n){var c=this.thread.z,a=this.thread.y,r=this.thread.x,l=c+1>=this.output.z?0:e[c+1][a][r];return i[c][a][r]-n*(0-(l-e[c][a][r]))/this.constants.cellSize}),{output:c,constants:{cellSize:i}}),this.updateMagneticZ=this.gpu.createKernel((function(t,e,i,n){var c=this.thread.z,a=this.thread.y,r=this.thread.x,l=c+1>=this.output.z?0:e[c+1][a][r],u=a+1>=this.output.y?0:t[c][a+1][r];return i[c][a][r]-n*(l-e[c][a][r]-(u-t[c][a][r]))/this.constants.cellSize}),{output:c,constants:{cellSize:i}}),this.updateElectricX=this.gpu.createKernel((function(t,e,i,n){var c=this.thread.z,a=this.thread.y,r=this.thread.x,l=a-1<0?0:e[c][a-1][r];return i[c][a][r]+n*(e[c][a][r]-l-0)/this.constants.cellSize}),{output:c,constants:{cellSize:i}}),this.updateElectricY=this.gpu.createKernel((function(t,e,i,n){var c=this.thread.z,a=this.thread.y,r=this.thread.x,l=c-1<0?0:e[c-1][a][r];return i[c][a][r]+n*(0-(e[c][a][r]-l))/this.constants.cellSize}),{output:c,constants:{cellSize:i}}),this.updateElectricZ=this.gpu.createKernel((function(t,e,i,n){var c=this.thread.z,a=this.thread.y,r=this.thread.x,l=c-1<0?0:e[c-1][a][r],u=a-1<0?0:t[c][a-1][r];return i[c][a][r]+n*(e[c][a][r]-l-(t[c][a][r]-u))/this.constants.cellSize}),{output:c,constants:{cellSize:i}})}(F,.01);function v(t,e,i){return Math.max(t,Math.min(e,i))}var X=null;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement((function(){var t=Object(n.useRef)(null),e=Object(n.useState)(null),i=Object(o.a)(e,2),a=i[0],r=i[1],l=Object(n.useMemo)((function(){return function(t){return[0,0,3e3]}}),[]),h=Object(n.useCallback)((function(){var e=!1;return function(){var i=Object(d.a)(u.a.mark((function i(){var n,c,r,d,o,h,g,M,w;return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,new Promise((function(t){return setTimeout(t,5)}));case 2:if(e){i.next=14;break}if(n=m.getData(),null!==a&&t.current)for(c=l(n.time),r=v(0,n.electricFieldX.length-1,Math.floor(n.electricFieldX.length*a[0]/t.current.width)),d=v(0,n.electricFieldX[0].length-1,Math.floor(n.electricFieldX[0].length*a[1]/t.current.height)),o=0;o<n.electricFieldX[0][0].length;o++)n.electricFieldX[r][d][o]+=c[0]*f/2,n.electricFieldY[r][d][o]+=c[1]*f/2,n.electricFieldZ[r][d][o]+=c[2]*f/2;if(m.stepMagnetic(f),null!==a&&t.current)for(h=l(n.time),g=v(0,n.electricFieldX.length-1,Math.floor(n.electricFieldX.length*a[0]/t.current.width)),M=v(0,n.electricFieldX[0].length-1,Math.floor(n.electricFieldX[0].length*a[1]/t.current.height)),w=0;w<n.electricFieldX[0][0].length;w++)n.electricFieldX[g][M][w]+=h[0]*f/2,n.electricFieldY[g][M][w]+=h[1]*f/2,n.electricFieldZ[g][M][w]+=h[2]*f/2;return m.stepElectric(f),null===X&&null!==t.current&&(u=new s.GPU({mode:"webgl2",canvas:t.current}),X=u.createKernel((function(t,e,i,n,c,a){var r=this.constants.gridSizeX*this.thread.x/this.output.x,l=this.constants.gridSizeY*this.thread.y/this.output.y,u=Math.floor(r),d=Math.floor(l),o=u+1,s=d+1,h=o===u?0:(r-u)/(o-u),g=s===d?0:(l-d)/(s-d),p=Math.round(this.constants.gridSizeZ/2),f=t[u][d][p]*t[u][d][p]+e[u][d][p]*e[u][d][p]+i[u][d][p]*i[u][d][p],F=t[u][s][p]*t[u][s][p]+e[u][s][p]*e[u][s][p]+i[u][s][p]*i[u][s][p],m=t[o][d][p]*t[o][d][p]+e[o][d][p]*e[o][d][p]+i[o][d][p]*i[o][d][p],v=t[o][s][p]*t[o][s][p]+e[o][s][p]*e[o][s][p]+i[o][s][p]*i[o][s][p],X=(n[u][d][p]+n[u+1][d+1][p])/2,M=(c[u][d][p]+c[u+1][d+1][p])/2,w=(a[u][d][p]+a[u+1][d+1][p])/2,z=(n[u][s][p]+n[u+1][s+1][p])/2,Y=(c[u][s][p]+c[u+1][s+1][p])/2,Z=(a[u][s][p]+a[u+1][s+1][p])/2,x=(n[o][d][p]+n[o+1][d+1][p])/2,S=(c[o][d][p]+c[o+1][d+1][p])/2,b=(a[o][d][p]+a[o+1][d+1][p])/2,y=(n[o][s][p]+n[o+1][s+1][p])/2,E=(c[o][s][p]+c[o+1][s+1][p])/2,j=(a[o][s][p]+a[o+1][s+1][p])/2,k=X*X+M*M+w*w,O=z*z+Y*Y+Z*Z,K=x*x+S*S+b*b,P=y*y+E*E+j*j,D=h*m+(1-h)*f,U=h*v+(1-h)*F,W=Math.max(0,Math.min(25,g*U+(1-g)*D)),B=h*K+(1-h)*k,G=h*P+(1-h)*O,J=Math.max(0,Math.min(25,g*G+(1-g)*B));this.color(W/25,0,J/25)}),{output:p,constants:{gridSizeX:F[0],gridSizeY:F[1],gridSizeZ:F[2]},graphical:!0})),null!==X&&X(n.electricFieldX,n.electricFieldY,n.electricFieldZ,n.magneticFieldX,n.magneticFieldY,n.magneticFieldZ),i.next=12,new Promise((function(t){return setTimeout(t,5)}));case 12:i.next=2;break;case 14:case"end":return i.stop()}var u}),i)})));return function(){return i.apply(this,arguments)}}()(),function(){e=!0}}),[l,a]);return Object(n.useEffect)(h,[h]),c.a.createElement("canvas",{width:p[0],height:p[1],ref:t,onMouseDown:function(t){return r([t.clientX,p[1]-t.clientY])},onMouseMove:function(t){null!==a&&r([t.clientX,p[1]-t.clientY])},onMouseUp:function(t){return r(null)}})}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},76:function(t,e,i){t.exports=i(184)},81:function(t,e,i){}},[[76,1,2]]]);
//# sourceMappingURL=main.54e30585.chunk.js.map