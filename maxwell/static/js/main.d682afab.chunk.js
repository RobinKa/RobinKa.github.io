(this.webpackJsonpmaxwell=this.webpackJsonpmaxwell||[]).push([[0],{183:function(e,t,i){},184:function(e,t,i){"use strict";i.r(t);var a=i(5),r=i.n(a),n=i(72),c=i.n(n),u=(i(81),i(7)),l=i(14),s=i(73);function o(e){var t={};return function(i){return t[i]||(t[i]=e()),t[i]}}var d=function e(t,i,a){var r=this;function n(e,t,i,a,r){return a<0||a>=t||r<0||r>=i?0:e[r][a]}Object(s.a)(this,e),this.gpu=t,this.gridSize=i,this.cellSize=a,this.data=void 0,this.updateMagneticX=void 0,this.updateMagneticY=void 0,this.updateMagneticZ=void 0,this.updateElectricX=void 0,this.updateElectricY=void 0,this.updateElectricZ=void 0,this.injectSource=void 0,this.decaySource=void 0,this.makeFieldTexture=void 0,this.copyTexture=void 0,this.drawOnTexture=void 0,this.setGridSize=function(e){r.gridSize=e,[r.updateElectricX,r.updateElectricY,r.updateElectricZ,r.updateMagneticX,r.updateMagneticY,r.updateMagneticZ,r.injectSource,r.decaySource,r.makeFieldTexture("ex"),r.makeFieldTexture("ey"),r.makeFieldTexture("ez"),r.makeFieldTexture("mx"),r.makeFieldTexture("my"),r.makeFieldTexture("mz"),r.makeFieldTexture("esz"),r.makeFieldTexture("permeability"),r.makeFieldTexture("permittivity"),r.copyTexture("loadPermittivity"),r.copyTexture("loadPermittivity"),r.copyTexture("permeability"),r.copyTexture("permittivity"),r.copyTexture("ex"),r.copyTexture("ey"),r.copyTexture("esz"),r.copyTexture("mx"),r.copyTexture("my"),r.copyTexture("mz"),r.drawOnTexture("esz"),r.drawOnTexture("permeability"),r.drawOnTexture("permittivity")].forEach((function(t){return t.setOutput(e)})),r.data.electricFieldX.shape=e,r.data.electricFieldY.shape=e,r.data.electricFieldZ.shape=e,r.data.magneticFieldX.shape=e,r.data.magneticFieldY.shape=e,r.data.magneticFieldZ.shape=e,r.data.permittivity.shape=e,r.data.permeability.shape=e,r.data.permittivity.values=r.copyTexture("permittivity")(r.data.permittivity.values),r.data.permeability.values=r.copyTexture("permeability")(r.data.permeability.values),r.resetFields()},this.setCellSize=function(e){r.cellSize=e,r.resetFields()},this.stepElectric=function(e){var t=r.data.electricFieldX.values,i=r.data.electricFieldY.values,a=r.data.electricFieldZ.values,n=r.data.magneticFieldX.values,c=r.data.magneticFieldY.values,u=r.data.magneticFieldZ.values,l=r.data.permittivity.values,s=r.injectSource(r.data.electricSourceFieldZ.values,a,e);r.data.electricSourceFieldZ.values=r.decaySource(r.copyTexture("esz")(r.data.electricSourceFieldZ.values),e),r.data.electricFieldX.values=r.updateElectricX(c,u,l,r.copyTexture("ex")(t),e,r.cellSize),r.data.electricFieldY.values=r.updateElectricY(n,u,l,r.copyTexture("ey")(i),e,r.cellSize),r.data.electricFieldZ.values=r.updateElectricZ(n,c,l,s,e,r.cellSize),r.data.time+=e/2},this.stepMagnetic=function(e){var t=r.data.electricFieldX.values,i=r.data.electricFieldY.values,a=r.data.electricFieldZ.values,n=r.data.magneticFieldX.values,c=r.data.magneticFieldY.values,u=r.data.magneticFieldZ.values,l=r.data.permeability.values;r.data.magneticFieldX.values=r.updateMagneticX(i,a,l,r.copyTexture("mx")(n),e,r.cellSize),r.data.magneticFieldY.values=r.updateMagneticY(t,a,l,r.copyTexture("my")(c),e,r.cellSize),r.data.magneticFieldZ.values=r.updateMagneticZ(t,i,l,r.copyTexture("mz")(u),e,r.cellSize),r.data.time+=e/2},this.resetFields=function(){r.data.time=0,r.data.electricFieldX.values=r.makeFieldTexture("ex")(0),r.data.electricFieldY.values=r.makeFieldTexture("ey")(0),r.data.electricFieldZ.values=r.makeFieldTexture("ez")(0),r.data.magneticFieldX.values=r.makeFieldTexture("mx")(0),r.data.magneticFieldY.values=r.makeFieldTexture("my")(0),r.data.magneticFieldZ.values=r.makeFieldTexture("mz")(0),r.data.electricSourceFieldZ.values=r.makeFieldTexture("esz")(0)},this.resetMaterials=function(){r.data.permeability.values=r.makeFieldTexture("permeability")(1),r.data.permittivity.values=r.makeFieldTexture("permittivity")(1)},this.drawPermeability=function(e,t,i){r.data.permeability.values=r.drawOnTexture("permeability")(e,t,i,0,r.copyTexture("permability")(r.data.permeability.values))},this.drawPermittivity=function(e,t,i){r.data.permittivity.values=r.drawOnTexture("permittivity")(e,t,i,0,r.copyTexture("permittivity")(r.data.permittivity.values))},this.injectSignal=function(e,t,i,a){r.data.electricSourceFieldZ.values=r.drawOnTexture("esz")(e,t,i*a,1,r.copyTexture("esz")(r.data.electricSourceFieldZ.values))},this.loadPermittivity=function(e){r.data.permittivity.values=r.copyTexture("loadPermittivity")(e)},this.loadPermeability=function(e){r.data.permeability.values=r.copyTexture("loadPermeability")(e)},this.getData=function(){return r.data},this.makeFieldTexture=o((function(){return r.gpu.createKernel((function(e){return e})).setOutput(r.gridSize).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single")})),this.copyTexture=o((function(){return r.gpu.createKernel((function(e){return e[this.thread.y][this.thread.x]})).setOutput(r.gridSize).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single")})),this.data={time:0,electricFieldX:{values:this.makeFieldTexture("ex")(0),shape:this.gridSize},electricFieldY:{values:this.makeFieldTexture("ey")(0),shape:this.gridSize},electricFieldZ:{values:this.makeFieldTexture("ez")(0),shape:this.gridSize},magneticFieldX:{values:this.makeFieldTexture("mx")(0),shape:this.gridSize},magneticFieldY:{values:this.makeFieldTexture("my")(0),shape:this.gridSize},magneticFieldZ:{values:this.makeFieldTexture("mz")(0),shape:this.gridSize},electricSourceFieldZ:{values:this.makeFieldTexture("esz")(0),shape:this.gridSize},permittivity:{values:this.makeFieldTexture("permittivity")(1),shape:this.gridSize},permeability:{values:this.makeFieldTexture("permeability")(1),shape:this.gridSize}},this.drawOnTexture=o((function(){return r.gpu.createKernel((function(e,t,i,a,r){var c=this.thread.x,u=this.thread.y,l=n(r,this.output.x,this.output.y,c,u);return Math.max(Math.abs(e[0]-c),Math.abs(e[1]-u))<t?i+a*l:l}),{constants:{cellSize:a}}).setOutput(r.gridSize).setFunctions([n]).setWarnVarUsage(!1).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single")})),this.injectSource=this.gpu.createKernel((function(e,t,i){var a=this.thread.x,r=this.thread.y,c=this.output.x,u=this.output.y;return n(t,c,u,a,r)+n(e,c,u,a,r)*i})).setOutput(this.gridSize).setFunctions([n]).setWarnVarUsage(!1).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single"),this.decaySource=this.gpu.createKernel((function(e,t){var i=this.thread.x,a=this.thread.y;return n(e,this.output.x,this.output.y,i,a)*Math.pow(.1,t)})).setOutput(this.gridSize).setFunctions([n]).setWarnVarUsage(!1).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single"),this.updateMagneticX=this.gpu.createKernel((function(e,t,i,a,r,c){var u=this.thread.x,l=this.thread.y,s=this.output.x,o=this.output.y;return n(a,s,o,u,l)-r/(n(i,s,o,u,l)*c)*(n(t,s,o,u,l+1)-n(t,s,o,u,l))}),{constants:{cellSize:a}}).setOutput(this.gridSize).setFunctions([n]).setWarnVarUsage(!1).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single"),this.updateMagneticY=this.gpu.createKernel((function(e,t,i,a,r,c){var u=this.thread.x,l=this.thread.y,s=this.output.x,o=this.output.y;return n(a,s,o,u,l)-r/(n(i,s,o,u,l)*c)*-(n(t,s,o,u+1,l)-n(t,s,o,u,l))}),{constants:{cellSize:a}}).setOutput(this.gridSize).setFunctions([n]).setWarnVarUsage(!1).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single"),this.updateMagneticZ=this.gpu.createKernel((function(e,t,i,a,r,c){var u=this.thread.x,l=this.thread.y,s=this.output.x,o=this.output.y;return n(a,s,o,u,l)-r/(n(i,s,o,u,l)*c)*(n(t,s,o,u+1,l)-n(t,s,o,u,l)-(n(e,s,o,u,l+1)-n(e,s,o,u,l)))}),{constants:{cellSize:a}}).setOutput(this.gridSize).setFunctions([n]).setWarnVarUsage(!1).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single"),this.updateElectricX=this.gpu.createKernel((function(e,t,i,a,r,c){var u=this.thread.x,l=this.thread.y,s=this.output.x,o=this.output.y;return n(a,s,o,u,l)+r/(n(i,s,o,u,l)*c)*(n(t,s,o,u,l)-n(t,s,o,u,l-1))}),{constants:{cellSize:a}}).setOutput(this.gridSize).setFunctions([n]).setWarnVarUsage(!1).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single"),this.updateElectricY=this.gpu.createKernel((function(e,t,i,a,r,c){var u=this.thread.x,l=this.thread.y,s=this.output.x,o=this.output.y;return n(a,s,o,u,l)+r/(n(i,s,o,u,l)*c)*-(n(t,s,o,u,l)-n(t,s,o,u-1,l))}),{constants:{cellSize:a}}).setOutput(this.gridSize).setFunctions([n]).setWarnVarUsage(!1).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single"),this.updateElectricZ=this.gpu.createKernel((function(e,t,i,a,r,c){var u=this.thread.x,l=this.thread.y,s=this.output.x,o=this.output.y;return n(a,s,o,u,l)+r/(n(i,s,o,u,l)*c)*(n(t,s,o,u,l)-n(t,s,o,u-1,l)-(n(e,s,o,u,l)-n(e,s,o,u,l-1)))}),{constants:{cellSize:a}}).setOutput(this.gridSize).setFunctions([n]).setWarnVarUsage(!1).setPipeline(!0).setTactic("performance").setDynamicOutput(!0).setDynamicArguments(!0).setPrecision("single")},h=i(74);function m(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(i,!0).forEach((function(t){Object(h.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function v(e){var t=Object(a.useState)(void 0!==e.initiallyCollapsed&&e.initiallyCollapsed),i=Object(u.a)(t,2),n=i[0],c=i[1];return r.a.createElement("div",{id:e.id,className:e.className,style:g({textAlign:"center",background:"rgb(33, 33, 33)",fontWeight:"lighter",color:"white"},e.style)},r.a.createElement("button",{onClick:function(e){return c(!n)},style:g({width:"100%",height:"24px",background:"rgb(50, 50, 50)",border:"0px",color:"white",fontWeight:"bold",cursor:"pointer"},e.buttonStyle)},e.title?"".concat(e.title," "):"","[",n?"+":"-","]"),!n&&e.children)}function y(e){return r.a.createElement("div",null,r.a.createElement("label",null,e.label),r.a.createElement("div",null,r.a.createElement("input",{type:"range",min:e.min,max:e.max,value:e.value,step:e.step,onChange:function(t){return e.setValue(parseFloat(t.target.value))},style:{height:10,width:"100%"}}),r.a.createElement("div",{style:{textAlign:"center",lineHeight:.2,marginBottom:"7px"}},e.value)))}function b(e){return r.a.createElement("div",{style:{margin:"10px"}},e.options.map((function(t,i){return r.a.createElement("button",{className:e.buttonClassName,key:t,style:{backgroundColor:"rgb(50, 50, 50)",color:"white",border:i===e.selectedOption?"3px solid rgb(0, 150, 255)":"0",height:"30px",width:"70px",overflow:"hidden",textOverflow:"hidden"},onClick:function(t){return e.setSelectedOption(i)}},t)})))}function f(e){var t=e.simulator,i=e.gridSize,n=Object(a.useState)(""),c=Object(u.a)(n,2),l=c[0],s=c[1],o=Object(a.useCallback)((function(){if(t){var e=t.getData();window.open(function(e){var t=document.createElement("canvas");t.width=e.shape[0],t.height=e.shape[1];var i=e.permeability,a=e.permittivity,r=t.getContext("2d");r.fillStyle="rgb(1, 0, 1)",r.fillRect(0,0,t.width,t.height),r.fillStyle="rgb(0, 255, 0)",r.textAlign="center",r.textBaseline="middle",r.fillText("warlock.ai/maxwell",t.width/2,t.height/2);for(var n=r.getImageData(0,0,t.width,t.height),c=0;c<t.width;c++)for(var u=0;u<t.height;u++)n.data[4*c+u*t.width*4+0]=Math.round(a[u][c]),n.data[4*c+u*t.width*4+2]=Math.round(i[u][c]),n.data[4*c+u*t.width*4+3]=255;return r.putImageData(n,0,0),t.toDataURL("image/png")}({permittivity:e.permittivity.values.toArray(),permeability:e.permeability.values.toArray(),shape:[e.permeability.shape[0],e.permeability.shape[1]]}))}}),[t]),d=Object(a.useCallback)((function(){t&&function(e,t,i){var a=document.createElement("canvas");a.width=t[0],a.height=t[1];var r=new Image;r.crossOrigin="anonymous",r.onload=function(e){var n=a.getContext("2d");n.fillStyle="rgb(1, 0, 1)",n.fillRect(0,0,a.width,a.height),n.drawImage(r,0,0,r.width,r.height);for(var c={permeability:[],permittivity:[],shape:t},u=n.getImageData(0,0,a.width,a.height).data,l=0;l<t[1];l++){c.permittivity.push([]),c.permeability.push([]);for(var s=0;s<t[0];s++)c.permittivity[l].push(Math.max(1,u[4*s+l*t[0]*4+0])),c.permeability[l].push(Math.max(1,u[4*s+l*t[0]*4+2]))}i(c)},r.src=e}(l,[i[0],i[1]],(function(e){t&&(t.loadPermeability(e.permeability),t.loadPermittivity(e.permittivity))}))}),[t,i,l]);return r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement("div",null,r.a.createElement("button",{onClick:o,style:{background:"rgba(50, 50, 50, 100)",border:"0px",color:"white",margin:"2px"}},"Save map")),r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:function(e){return s(e.target.value)},style:{background:"rgba(50, 50, 50, 100)",border:"0px",color:"white",margin:"2px"}}),r.a.createElement("button",{onClick:d,style:{background:"rgba(50, 50, 50, 100)",border:"0px",color:"white",margin:"2px"}},"Load map url")))}function x(e){return r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(y,{label:"Grid length",value:e.gridSizeLongest,setValue:e.setGridSizeLongest,min:100,max:2e3,step:100}),r.a.createElement(y,{label:"Time step size",value:e.dt,setValue:e.setDt,min:.001,max:.1,step:.001}),r.a.createElement(y,{label:"Cell size",value:e.cellSize,setValue:e.setCellSize,min:.001,max:1,step:.001}),r.a.createElement(y,{label:"Resolution scale",value:e.resolutionScale,setValue:e.setResolutionScale,min:.1,max:2,step:.1}),r.a.createElement(y,{label:"Simulation speed",value:e.simulationSpeed,setValue:e.setSimulationSpeed,min:.1,max:10,step:.1}))}function O(e){return r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(y,{label:"Brush size",value:e.brushSize,setValue:e.setBrushSize,min:1,max:100,step:1}),r.a.createElement(y,{label:"Brush value",value:e.brushValue,setValue:e.setBrushValue,min:1,max:100,step:1}),r.a.createElement(y,{label:"Signal frequency",value:e.signalFrequency,setValue:e.setSignalFrequency,min:0,max:25,step:.25}),r.a.createElement(b,{options:["\u03b5-Brush","\xb5-Brush","Signal"],selectedOption:e.clickOption,setSelectedOption:e.setClickOption}),r.a.createElement("div",null,r.a.createElement("button",{onClick:e.resetFields,style:{backgroundColor:"rgb(50, 50, 50)",border:"0px",color:"white",margin:"2px",width:"130px"}},"Reset fields"),r.a.createElement("button",{onClick:e.resetMaterials,style:{backgroundColor:"rgb(50, 50, 50)",border:"0px",color:"white",margin:"2px",width:"130px"}},"Reset materials")))}var S=i(75),F=i.n(S);i(183);var j=function(){if(l.GPU.isSinglePrecisionSupported){if(l.GPU.isWebGL2Supported)return"webgl2";if(l.GPU.isWebGLSupported)return"webgl"}return"cpu"}();console.log("Using GPU mode ".concat(j));var w="cpu"===j?3:20,T="cpu"===j?1:3,M="cpu"===j?.05:.02,E="cpu"===j?.08:.03,z="cpu"===j?200:500,A="cpu"===j?.3:1,k=[window.innerWidth,window.innerHeight],P=C(k,A),D=Y(z,P);function C(e,t){return[Math.round(e[0]*t),Math.round(e[1]*t)]}function Y(e,t){var i=t[0]/t[1];return t[0]>=t[1]?[e,Math.ceil(e/i)]:[Math.ceil(e*i),e]}function X(e,t,i){return Math.max(e,Math.min(t,i))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(){var e=Object(a.useRef)(null),t=Object(a.useState)(P),i=Object(u.a)(t,2),n=i[0],c=i[1],s=Object(a.useState)(k),o=Object(u.a)(s,2),h=o[0],p=o[1],g=Object(a.useState)(z),y=Object(u.a)(g,2),b=y[0],S=y[1],Z=Object(a.useState)(M),V=Object(u.a)(Z,2),U=V[0],W=V[1],B=Object(a.useState)(E),K=Object(u.a)(B,2),R=K[0],G=K[1],I=Object(a.useState)(A),q=Object(u.a)(I,2),L=q[0],N=q[1],Q=Object(a.useState)(1),H=Object(u.a)(Q,2),J=H[0],$=H[1];Object(a.useEffect)((function(){var e=function(){var e=[window.innerWidth,window.innerHeight];c(C(e,L)),p(e)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[L]);var _=Object(a.useMemo)((function(){return Y(b,n)}),[n,b]),ee=Object(a.useState)(null),te=Object(u.a)(ee,2),ie=te[0],ae=te[1];Object(a.useEffect)((function(){e.current&&ae(new l.GPU({mode:j,canvas:e.current}))}),[e]);var re=Object(a.useMemo)((function(){return ie?new d(ie,D,E):null}),[ie]),ne=Object(a.useMemo)((function(){return ie?function(e,t){function i(e,t,i,a,r){return a<0||a>=t||r<0||r>=i?0:e[r][a]}return("cpu"!==j?e.createKernel((function(e,t,a,r,n,c,u,l,s){var o=s[0],d=s[1],h=o*this.thread.x/this.output.x,m=d*(1-this.thread.y/this.output.y),p=i(e,o,d,h,m)*i(e,o,d,h,m)+i(t,o,d,h,m)*i(t,o,d,h,m)+i(a,o,d,h,m)*i(a,o,d,h,m),g=i(r,o,d,h-.5,m-.5),v=i(n,o,d,h-.5,m-.5),y=i(c,o,d,h-.5,m-.5),b=g*g+v*v+y*y,f=.1+.9*Math.max(0,Math.min(1,.4342944819*Math.log(i(u,o,d,h,m))/2)),x=.1+.9*Math.max(0,Math.min(1,.4342944819*Math.log(i(l,o,d,h,m))/2)),O=(Math.abs(h%1-.5)<.25?1:0)*(Math.abs(m%1-.5)<.25?1:0),S=1-O;this.color(Math.min(1,p/15+.7*O*f),Math.min(1,p/15+b/15),Math.min(1,b/15+.7*S*x))})):e.createKernel((function(e,t,a,r,n,c,u,l,s){var o=s[0],d=s[1],h=o*this.thread.x/this.output.x,m=d*(1-this.thread.y/this.output.y),p=Math.round(h),g=Math.round(m),v=i(e,o,d,p,g)*i(e,o,d,p,g)+i(t,o,d,p,g)*i(t,o,d,p,g)+i(a,o,d,p,g)*i(a,o,d,p,g),y=i(r,o,d,p,g),b=i(n,o,d,p,g),f=i(c,o,d,p,g),x=y*y+b*b+f*f,O=.1+.9*Math.max(0,Math.min(1,.4342944819*Math.log(i(u,o,d,p,g))/2)),S=.1+.9*Math.max(0,Math.min(1,.4342944819*Math.log(i(l,o,d,p,g))/2)),F=(Math.abs(h%1-.5)<.25?1:0)*(Math.abs(m%1-.5)<.25?1:0),j=1-F;this.color(Math.min(1,v/15+.7*F*O),Math.min(1,v/15+x/15),Math.min(1,x/15+.7*j*S))}))).setOutput(t).setGraphical(!0).setFunctions([i]).setWarnVarUsage(!1).setTactic("performance").setPrecision("unsigned").setDynamicOutput(!0).setDynamicArguments(!0)}(ie,D):null}),[ie]);Object(a.useEffect)((function(){ne&&ne.setOutput(n)}),[ne,n]),Object(a.useEffect)((function(){re&&re.setGridSize(_)}),[re,_]),Object(a.useEffect)((function(){re&&re.setCellSize(R)}),[re,R]);var ce=Object(a.useState)(1),ue=Object(u.a)(ce,2),le=ue[0],se=ue[1],oe=Object(a.useState)(w),de=Object(u.a)(oe,2),he=de[0],me=de[1],pe=Object(a.useState)(T),ge=Object(u.a)(pe,2),ve=ge[0],ye=ge[1],be=Object(a.useState)(!1),fe=Object(u.a)(be,2),xe=fe[0],Oe=fe[1],Se=Object(a.useState)(!1),Fe=Object(u.a)(Se,2),je=Fe[0],we=Fe[1],Te=Object(a.useState)(2),Me=Object(u.a)(Te,2),Ee=Me[0],ze=Me[1],Ae=Object(a.useState)(null),ke=Object(u.a)(Ae,2),Pe=ke[0],De=ke[1],Ce=Object(a.useRef)(0),Ye=Object(a.useRef)(null),Xe=Object(a.useCallback)((function(){if(re){var e=re.getData();if(null!==Ye.current){var t=X(0,_[0]-1,Math.floor(_[0]*Ye.current[0]/h[0])),i=X(0,_[1]-1,Math.floor(_[1]*Ye.current[1]/h[1])),a=Math.round(le/2);re.injectSignal([t,i],a,2e3*-he*Math.cos(2*Math.PI*ve*e.time),U)}re.stepMagnetic(U),re.stepElectric(U)}}),[re,_,U,ve,he,le,h]);Object(a.useEffect)((function(){var e=setInterval(Xe,1e3/J*U);return function(){return clearInterval(e)}}),[Xe,U,J]);var Ze=Object(a.useCallback)((function(){if(re&&ne){if(e.current){var t=C([window.innerWidth,window.innerHeight],L);e.current.width=t[0],e.current.height=t[1]}var i=re.getData();i.time>0&&ne(i.electricFieldX.values,i.electricFieldY.values,i.electricFieldZ.values,i.magneticFieldX.values,i.magneticFieldY.values,i.magneticFieldZ.values,i.permittivity.values,i.permeability.values,_)}}),[re,ne,_,L,e]);Object(a.useEffect)((function(){var e=!1;return requestAnimationFrame((function t(){e||(Ze(),requestAnimationFrame(t))})),function(){e=!0}}),[Ze]);var Ve=Object(a.useCallback)((function(e,t){if(re){var i=Math.round(_[0]*(e[0]/h[0])),a=Math.round(_[1]*(e[1]/h[1])),r=Math.round(le/2);"permittivity"===t?re.drawPermittivity([i,a,0],r,he):re.drawPermeability([i,a,0],r,he)}}),[re,_,h,le,he]),Ue=Object(a.useCallback)((function(){re&&re.resetMaterials()}),[re]),We=Object(a.useCallback)((function(){re&&(re.resetFields(),Ce.current=0)}),[re]),Be=Object(a.useCallback)((function(e){var t=Object(u.a)(e,2),i=t[0],a=t[1];re&&(2===Ee?Ye.current=[i,a]:0===Ee?(Ve([i,a],"permittivity"),we(!0)):1===Ee&&(Ve([i,a],"permeability"),Oe(!0)))}),[re,Ve,Ee]),Ke=Object(a.useCallback)((function(e){var t=Object(u.a)(e,2),i=t[0],a=t[1];re&&(2===Ee&&null!==Ye.current&&(Ye.current=[i,a]),je&&Ve([i,a],"permittivity"),xe&&Ve([i,a],"permeability"))}),[re,Ve,Ee,xe,je]),Re=Object(a.useCallback)((function(){2===Ee?Ye.current=null:1===Ee?Oe(!1):0===Ee&&we(!1)}),[Ee]),Ge=Object(a.useState)(2),Ie=Object(u.a)(Ge,2),qe=Ie[0],Le=Ie[1],Ne=Object(a.useState)(1),Qe=Object(u.a)(Ne,2),He=Qe[0],Je=Qe[1],$e=Object(a.useState)(w),_e=Object(u.a)($e,2),et=_e[0],tt=_e[1],it=Object(a.useState)(5),at=Object(u.a)(it,2),rt=at[0],nt=at[1],ct=Object(a.useState)(5),ut=Object(u.a)(ct,2),lt=ut[0],st=ut[1];return Object(a.useEffect)((function(){2===Ee&&2!==qe?(nt(le),st(he),se(He),me(et)):2!==Ee&&2===qe&&(Je(le),tt(he),se(rt),me(lt)),Le(Ee)}),[Ee,qe,He,et,rt,lt,le,he]),r.a.createElement("div",{style:{touchAction:"none",userSelect:"none"}},r.a.createElement("canvas",{width:n[0],height:n[1],ref:e,style:{position:"absolute",width:h[0],height:h[1]},onMouseDown:function(e){return Be([e.clientX,e.clientY])},onMouseMove:function(e){De([e.clientX,e.clientY]),Ke([e.clientX,e.clientY])},onMouseUp:function(e){return Re()},onMouseLeave:function(e){return Re()},onTouchStart:function(e){De([e.touches[0].clientX,e.touches[0].clientY]),Be([e.touches[0].clientX,e.touches[0].clientY])},onTouchMove:function(e){De([e.touches[0].clientX,e.touches[0].clientY]),Ke([e.touches[0].clientX,e.touches[0].clientY])},onTouchEnd:function(e){De(null),Re()},onTouchCancel:function(e){De(null),Re()},onContextMenu:function(e){return e.preventDefault()}}),r.a.createElement("div",{style:{position:"absolute",bottom:10,right:10}},r.a.createElement("a",{href:"https://github.com/RobinKa/maxwell-simulation",rel:"noopener noreferrer",target:"_blank",style:{fontWeight:"lighter",color:"rgba(255, 255, 255, 100)",textDecoration:"none"}},"Source code")),Pe&&r.a.createElement("div",{style:{position:"absolute",pointerEvents:"none",left:Pe[0]-2*(le+1),top:Pe[1]-2*(le+1),width:4*(le+1),height:4*(le+1),border:"2px solid yellow"}}),r.a.createElement("img",{onClick:m,src:F.a,alt:"Fullscreen",style:{position:"absolute",right:10,top:10,cursor:"pointer"}}),r.a.createElement(v,{id:"Menu",title:"Menu",buttonStyle:{background:"rgb(60, 60, 60)"}},r.a.createElement(v,{title:"Controls"},r.a.createElement(O,{brushSize:le,setBrushSize:se,brushValue:he,setBrushValue:me,signalFrequency:ve,setSignalFrequency:ye,clickOption:Ee,setClickOption:ze,resetFields:We,resetMaterials:Ue})),r.a.createElement(v,{title:"Save / Load",initiallyCollapsed:!0},r.a.createElement(f,{simulator:re,gridSize:_})),r.a.createElement(v,{title:"Settings",initiallyCollapsed:!0},r.a.createElement(x,{gridSizeLongest:b,setGridSizeLongest:S,simulationSpeed:J,setSimulationSpeed:$,resolutionScale:L,setResolutionScale:N,cellSize:R,setCellSize:G,dt:U,setDt:W}))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},75:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABISURBVFhH7dchDgAhDETRKfe/M1TUlgyqgv8Mq+AnQMjGTjJFqs+rlzlXjWMIIKC9Be6Jd3XrsAUEAAB4jgkYD+DPiIDfA6QD/j8gGcpVf+MAAAAASUVORK5CYII="},76:function(e,t,i){e.exports=i(184)},81:function(e,t,i){}},[[76,1,2]]]);
//# sourceMappingURL=main.d682afab.chunk.js.map