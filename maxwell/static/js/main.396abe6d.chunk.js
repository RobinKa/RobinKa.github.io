(this.webpackJsonpmaxwell=this.webpackJsonpmaxwell||[]).push([[0],{184:function(e,t,n){"use strict";n.r(t);var i=n(6),c=n.n(i),r=n(72),a=n.n(r),l=(n(81),n(14)),o=n.n(l),u=n(73),s=n(13),d=n(74),h=n(75);function f(e,t){for(var n=[],i=0;i<e[0];i++){for(var c=[],r=0;r<e[1];r++){for(var a=[],l=0;l<e[2];l++)a.push(t([i,r,l]));c.push(a)}n.push(c)}return n}var g=new h.GPU,m=g.createKernel((function(e,t){var n=this.thread.z,i=this.thread.y,c=this.thread.x,r=i+1>=this.constants.gridSize?i:i+1,a=c+1>=this.constants.gridSize?c:c+1;return(t[n][r][c]-t[n][i][c]-(e[n][i][a]-e[n][i][c]))/this.constants.cellSize}),{output:[30,30,30],constants:{gridSize:30,cellSize:.1}}),v=g.createKernel((function(e,t){var n=this.thread.z,i=this.thread.y,c=this.thread.x,r=n+1>=this.constants.gridSize?n:n+1,a=c+1>=this.constants.gridSize?c:c+1;return(e[n][i][a]-e[n][i][c]-(t[r][i][c]-t[n][i][c]))/this.constants.cellSize}),{output:[30,30,30],constants:{gridSize:30,cellSize:.1}}),F=g.createKernel((function(e,t){var n=this.thread.z,i=this.thread.y,c=this.thread.x,r=n+1>=this.constants.gridSize?n:n+1,a=i+1>=this.constants.gridSize?i:i+1;return(t[r][i][c]-t[n][i][c]-(e[n][a][c]-e[n][i][c]))/this.constants.cellSize}),{output:[30,30,30],constants:{gridSize:30,cellSize:.1}}),b=g.createKernel((function(e,t){var n=this.thread.z,i=this.thread.y,c=this.thread.x,r=i-1<0?i:i-1,a=c-1<0?c:c-1;return(t[n][i][c]-t[n][r][c]-(e[n][i][c]-e[n][i][a]))/this.constants.cellSize}),{output:[30,30,30],constants:{gridSize:30,cellSize:.1}}),S=g.createKernel((function(e,t){var n=this.thread.z,i=this.thread.y,c=this.thread.x,r=n-1<0?n:n-1,a=c-1<0?c:c-1;return(e[n][i][c]-e[n][i][a]-(t[n][i][c]-t[r][i][c]))/this.constants.cellSize}),{output:[30,30,30],constants:{gridSize:30,cellSize:.1}}),p=g.createKernel((function(e,t){var n=this.thread.z,i=this.thread.y,c=this.thread.x,r=n-1<0?n:n-1,a=i-1<0?i:i-1;return(t[n][i][c]-t[r][i][c]-(e[n][i][c]-e[n][a][c]))/this.constants.cellSize}),{output:[30,30,30],constants:{gridSize:30,cellSize:.1}});function z(e,t,n){for(var i=0;i<e.length;i++)for(var c=0;c<e[0].length;c++)for(var r=0;r<e[0][0].length;r++)e[i][c][r]+=n*t[i][c][r]}var M=new function e(t){var n=this;Object(d.a)(this,e),this.data=void 0,this.stepElectric=function(e){var t=b(n.data.magneticFieldY,n.data.magneticFieldZ),i=S(n.data.magneticFieldX,n.data.magneticFieldZ),c=p(n.data.magneticFieldX,n.data.magneticFieldY);z(n.data.electricFieldX,t,e),z(n.data.electricFieldY,i,e),z(n.data.electricFieldZ,c,e),n.data.time+=e/2},this.stepMagnetic=function(e){var t=m(n.data.electricFieldY,n.data.electricFieldZ),i=v(n.data.electricFieldX,n.data.electricFieldZ),c=F(n.data.electricFieldX,n.data.electricFieldY);z(n.data.magneticFieldX,t,-e),z(n.data.magneticFieldY,i,-e),z(n.data.magneticFieldZ,c,-e),n.data.time+=e/2},this.getData=function(){return n.data},this.data={time:0,electricFieldX:f(t,(function(e){return 0})),electricFieldY:f(t,(function(e){return 0})),electricFieldZ:f(t,(function(e){return 0})),magneticFieldX:f(t,(function(e){return 0})),magneticFieldY:f(t,(function(e){return 0})),magneticFieldZ:f(t,(function(e){return 0})),permittivity:f(t,(function(e){return 0})),permeability:f(t,(function(e){return 0}))}}([30,30,30]);function X(e,t,n,i){e.fillStyle=i;var c=t[0]-n[0],r=t[1]-n[1];if(c*c+r*r>1){e.strokeStyle=i,e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(n[0],n[1]),e.stroke(),e.beginPath();var a=Math.atan2(n[1]-t[1],n[0]-t[0]),l=5*Math.cos(a)+n[0],o=5*Math.sin(a)+n[1];e.moveTo(l,o),a+=1/3*(2*Math.PI),l=5*Math.cos(a)+n[0],o=5*Math.sin(a)+n[1],e.lineTo(l,o),a+=1/3*(2*Math.PI),l=5*Math.cos(a)+n[0],o=5*Math.sin(a)+n[1],e.lineTo(l,o),e.closePath(),e.fill()}else e.beginPath(),e.arc(t[0],t[1],10/3,0,2*Math.PI),e.fill()}function w(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function y(e,t){var n=w(t);if(0===n||n<=e*e)return t;var i=Math.sqrt(n);return[e*t[0]/i,e*t[1]/i,e*t[2]/i]}function x(e,t,n){return Math.max(e,Math.min(t,n))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(c.a.createElement((function(){var e=Object(i.useRef)(null),t=Object(i.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],l=Object(i.useState)(!0),d=Object(s.a)(l,2),h=d[0],f=d[1],g=Object(i.useState)(!1),m=Object(s.a)(g,2),v=m[0],F=m[1],b=Object(i.useState)(!0),S=Object(s.a)(b,2),p=S[0],z=S[1],E=Object(i.useState)(null),j=Object(s.a)(E,2),k=j[0],O=j[1],T=Object(i.useMemo)((function(){return function(t){if(e.current){var n=e.current.getContext("2d");if(n){n.fillStyle="black",n.fillRect(0,0,n.canvas.width,n.canvas.height);for(var i=n.canvas.width/t.electricFieldX.length,c=i/2.5,a=0,l=0,o=0,u=0;u<t.electricFieldX.length;u++)for(var s=0;s<t.electricFieldX[0].length;s++){var d=Math.round(t.electricFieldX[0][0].length/2),f=[(u+.5)*i+i*d/(4*t.electricFieldX.length),(s+.5)*i-i*d/(4*t.electricFieldX.length)],g=[t.electricFieldX[u][s][d],t.electricFieldY[u][s][d],t.electricFieldZ[u][s][d]],m=[t.magneticFieldX[u][s][d],t.magneticFieldY[u][s][d],t.magneticFieldZ[u][s][d]],F=[(k=g)[1]*(O=m)[2]-k[2]*O[1],k[2]*O[0]-k[0]*O[2],k[0]*O[1]-k[1]*O[0]],b=.5*w(g),S=.5*w(m),z=b+S;a+=z,l+=b,o+=S;var M=255*d/(t.electricFieldX[0][0].length-1);if(p&&(n.strokeStyle="rgb(".concat(M,", 255, ").concat(M,")"),n.beginPath(),n.arc(f[0],f[1],c*Math.min(1,z/2),0,2*Math.PI),n.stroke()),r){var x=y(1,g);X(n,f,[f[0]+c*x[0],f[1]+c*x[1]],"rgb(255, ".concat(M,", ").concat(M,")"))}if(h){var E=y(1,m);X(n,f,[f[0]+c*E[0],f[1]+c*E[1]],"rgb(".concat(M,", ").concat(M,", 255)"))}if(v){var j=y(2,F);X(n,f,[f[0]+c*j[0]/2,f[1]+c*j[1]/2],"rgb(".concat(255-M,", 255, ").concat(M,")"))}}n.fillStyle="white",n.fillText("Time: ".concat(t.time.toFixed(2)),10,10),n.fillStyle="lime",n.fillText("Total energy: ".concat(a.toFixed(2)),10,20),n.fillStyle="red",n.fillText("Electric energy: ".concat(l.toFixed(2)),10,30),n.fillStyle="blue",n.fillText("Magnetic energy: ".concat(o.toFixed(2)),10,40)}}var k,O}}),[e,r,h,p,v]),Y=Object(i.useMemo)((function(){return function(e){return[0,0,3]}}),[]),Z=Object(i.useCallback)((function(){var t=!1;return function(){var n=Object(u.a)(o.a.mark((function n(){var i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=o.a.mark((function t(){var n,i,c,r,a,l,u,s,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=M.getData(),.01,null!==k&&e.current)for(i=Y(n.time),c=x(0,n.electricFieldX.length-1,Math.round(n.electricFieldX.length*k[0]/e.current.width)),r=x(0,n.electricFieldX[0].length-1,Math.round(n.electricFieldX[0].length*k[1]/e.current.height)),a=0;a<30;a++)n.electricFieldX[c][r][a]=i[0],n.electricFieldY[c][r][a]=i[1],n.electricFieldZ[c][r][a]=i[2];if(M.stepMagnetic(.01),null!==k&&e.current)for(l=Y(n.time),u=x(0,n.electricFieldX.length-1,Math.round(n.electricFieldX.length*k[0]/e.current.width)),s=x(0,n.electricFieldX[0].length-1,Math.round(n.electricFieldX[0].length*k[1]/e.current.height)),d=0;d<30;d++)n.electricFieldX[u][s][d]=l[0],n.electricFieldY[u][s][d]=l[1],n.electricFieldZ[u][s][d]=l[2];return M.stepElectric(.01),T(M.getData()),t.next=9,new Promise((function(e){return setTimeout(e,10)}));case 9:case"end":return t.stop()}}),t)}));case 1:if(t){n.next=5;break}return n.delegateYield(i(),"t0",3);case 3:n.next=1;break;case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){t=!0}}),[T,Y,k,e]);return Object(i.useEffect)((function(){T(M.getData())}),[T]),Object(i.useEffect)(Z,[Z]),c.a.createElement("div",null,c.a.createElement("div",{style:{float:"left"}},c.a.createElement("canvas",{width:window.innerHeight,height:window.innerHeight,ref:e,onMouseDown:function(e){return O([e.clientX,e.clientY])},onMouseMove:function(e){null!==k&&O([e.clientX,e.clientY])},onMouseUp:function(e){return O(null)}})),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return a(!r)}},"Toggle electric")),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return f(!h)}},"Toggle magnetic")),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return z(!p)}},"Toggle energy")),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return F(!v)}},"Toggle poynting"))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,n){e.exports=n(184)},81:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.396abe6d.chunk.js.map