(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),r=n(7),o=n.n(r),c=(n(83),n(28)),l=(n(84),n(57)),s=n.n(l),d=n(72),u=n(12);function h(e,t,n,a){for(var i=u.c({shape:e}),r=[i],o=0;o<n;o++)r.push(u.d.conv2d({filters:Math.pow(2,o)*a,kernelSize:[3,3],padding:"same",strides:2,activation:"relu"}).apply(r[r.length-1]));for(var c=[r[r.length-1]],l=0;l<n;l++){var s=l===n-1,d=u.d.conv2dTranspose({filters:Math.pow(2,n-l-1)*a,kernelSize:[3,3],padding:"same",strides:2,activation:"relu"}).apply(c[c.length-1]),h=u.d.concatenate({axis:-1}).apply([d,r[n-l-1]]),g=u.d.conv2d({filters:s?t:Math.pow(2,n-l-1),kernelSize:[3,3],padding:"same",strides:1,activation:s?"tanh":"relu"}).apply(h);c.push(g)}return u.e({inputs:i,outputs:c[c.length-1]})}var g=n(77);function m(e){function t(){return(t=Object(d.a)(s.a.mark(function t(n){var a,i,r,o,c,l,d,g,m,p,f,v,w;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(a=document.createElement("canvas")).width=e.width,a.height=e.height,i=a.getContext("2d"),r=i.createImageData(e.width,e.height),o=u.g(u.a(u.h(n).reshape([1,e.width,e.height,4]).slice([0,0,0,0],[1,e.width,e.height,3]),127.5),1),c=[e.width,e.height,1],3,(l=h(c,3,e.layers,e.filters)).compile({optimizer:"adam",loss:"meanSquaredError"}),d=u.f([1].concat(c)),g=0;case 12:if(!(g<e.iterations)){t.next=26;break}return t.next=15,l.fit(d,o,{batchSize:1,epochs:20});case 15:return t.next=17,l.predict(d).array();case 17:for(m=t.sent,p=0;p<e.width;p++)for(f=0;f<e.height;f++)v=p+f*e.width,r.data[4*v+0]=Math.min(255,Math.max(0,127.5*(1+m[0][f][p][0]))),r.data[4*v+1]=Math.min(255,Math.max(0,127.5*(1+m[0][f][p][1]))),r.data[4*v+2]=Math.min(255,Math.max(0,127.5*(1+m[0][f][p][2]))),r.data[4*v+3]=255;i.putImageData(r,0,0),(w=document.createElement("img")).src=a.toDataURL("image/png"),document.body.appendChild(w);case 23:g++,t.next=12;break;case 26:case"end":return t.stop()}},t)}))).apply(this,arguments)}var n=Object(g.a)({accept:"image/*",onDrop:function(n){var a=new Image;a.onload=function(n){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var r=i.getContext("2d");r.drawImage(a,0,0,e.width,e.height);var o=r.getImageData(0,0,e.width,e.height).data;!function(e){t.apply(this,arguments)}(Array.from(o))};var i=n[0],r=new FileReader;r.onload=function(e){e.target.readyState===FileReader.DONE&&(a.src=e.target.result)},r.readAsDataURL(i)}}),a=n.getRootProps,r=n.getInputProps;return i.a.createElement("div",null,i.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px",textAlign:"center"}},i.a.createElement("div",a(),i.a.createElement("input",r()),i.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files"))))}u.b();var p=n(32),f=(n(152),n(153),function(){var e=Object(a.useState)(512),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(512),l=Object(c.a)(o,2),s=l[0],d=l[1],u=Object(a.useState)(!1),h=Object(c.a)(u,2),g=h[0],f=h[1],v=Object(a.useState)(5),w=Object(c.a)(v,2),b=w[0],E=w[1],y=Object(a.useState)(32),x=Object(c.a)(y,2),k=x[0],S=x[1];return i.a.createElement("div",null,i.a.createElement("div",{style:{marginLeft:"20%",marginRight:"20%"}},i.a.createElement("h1",{style:{textAlign:"center"}},"Deep Image Prior (",i.a.createElement("a",{href:"https://arxiv.org/abs/1711.10925"},"Paper"),")"),i.a.createElement("a",{href:"https://github.com/RobinKa/web-deep-image-prior"},i.a.createElement("h3",{style:{textAlign:"center"}},"Source Code")),i.a.createElement("label",{style:{fontSize:"24px",visibility:g?"visible":"collapse"}},"Generating..."),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(p.a,{defaultValue:512,min:0,max:4096,step:16,onChange:function(e){return r(e)}}),i.a.createElement("label",null,"Width: ",n)),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(p.a,{defaultValue:512,min:0,max:4096,step:16,onChange:function(e){return d(e)}}),i.a.createElement("label",null,"Height: ",s)),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(p.a,{defaultValue:5,min:1,max:50,step:1,onChange:function(e){return E(e)}}),i.a.createElement("label",null,"Layers: ",b)),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement(p.a,{defaultValue:32,min:1,max:256,step:1,onChange:function(e){return S(e)}}),i.a.createElement("label",null,"Filters: ",k))),i.a.createElement("div",{style:{visibility:g?"hidden":"visible",textAlign:"center"}},i.a.createElement(m,{width:n,height:s,iterations:1e5,setGenerating:f,layers:b,filters:k})))}),v=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(i.a.createElement(f,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/deepimageprior",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/deepimageprior","/service-worker.js");v?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):w(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):w(t,e)})}}()},78:function(e,t,n){e.exports=n(154)},83:function(e,t,n){},84:function(e,t,n){},91:function(e,t){},92:function(e,t){},93:function(e,t){},94:function(e,t){},95:function(e,t){},96:function(e,t){}},[[78,1,2]]]);
//# sourceMappingURL=main.c09d31d5.chunk.js.map